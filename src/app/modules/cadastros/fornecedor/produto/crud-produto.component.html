<!--
**********************************************************************************************
Code generated by MKL Plug-in
Copyright: Kerubin - kerubin.platform@gmail.com

WARNING: DO NOT CHANGE THIS CODE BECAUSE THE CHANGES WILL BE LOST IN THE NEXT CODE GENERATION.
***********************************************************************************************
-->

<div class="container">
  <p-panel>
    <p-header>
      <div class="ui-g kb-no-margins1">

        <div class="ui-g-12 ui-md-10 kb-no-margins1">
          <div class="kb-form-panel-header">
            {{ getTranslation('cadastros.fornecedor.produto') }}
            <!-- help -->
            <i *ngIf="showHideHelp" class="pi pi-question-circle" tooltipStyleClass="kb-help-class-id"
              pTooltip="Nesta tela, controle os registros de produto."></i>
            <!-- help -->
          </div>
        </div>

        <div class="ui-g-12 ui-md-2 kb-no-margins1">
          <div class="kb-no-margins1" style="display: flex; align-items: center; justify-content: flex-end;">
            <p-inputSwitch [(ngModel)]="showHideHelp"></p-inputSwitch>
            <span style="margin-left: 3px;">
              {{ getShowHideHelpLabel() }}
              <!-- help -->
              <i class="pi pi-question-circle" tooltipStyleClass="kb-help-class-id"
                pTooltip="Mostre ou oculte as dicas de ajuda dos campos."></i>
              <!-- help -->
            </span>
          </div>
        </div>

      </div>
    </p-header>


    <form #formProduto="ngForm" (ngSubmit)="saveFormProduto(formProduto.form)">
      <div class="ui-g">

        <!-- Begin buttons -->
        <div class="ui-g-12 crud-buttons-top kb-mobile-only">
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <button pButton type="submit" class="botao-margem-direita" label="Salvar" tooltipPosition="top"
              pTooltip="Salvar registro."></button>
          </div>
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <button pButton (click)="beginFormProduto(formProduto)" type="button" label="Novo" tooltipPosition="top"
              pTooltip="Criar novo registro."></button>
          </div>
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <a routerLink="/produto" pButton label="Voltar" tooltipPosition="top"
              pTooltip="Voltar para a listagem de registros."></a>
          </div>
        </div>
        <!-- End buttons -->

        <div class="ui-g-12 ui-fluid hidden">
          <label for="produto_id" class="hidden">
            {{ getTranslation('cadastros.fornecedor.produto_id') }}
            <!-- help -->
            <i *ngIf="showHideHelp" class="pi pi-question-circle" tooltipStyleClass="kb-help-class-id"
              pTooltip="Identificador único."></i>
            <!-- help -->
          </label>
          <div class="input-readonly">
            <input type="hidden" pInputText readonly #produto_id="ngModel" [(ngModel)]="produto.id" name="produto_id">
          </div>
        </div>

        <div class="ui-g-12 ui-fluid">
          <label for="produto_nome">
            {{ getTranslation('cadastros.fornecedor.produto_nome') }}
            <span class="kb-label-required">*</span>
          </label>
          <input type="text" pInputText #produto_nome_elementRef #produto_nome="ngModel" [(ngModel)]="produto.nome"
            name="produto_nome" required>
          <div class="invalid-message" *ngIf="produto_nome.invalid && produto_nome.dirty">Campo obrigatório.</div>
        </div>

        <div class="ui-g-12 ui-fluid">
          <label for="produto_fotos">
            Fotos
            <!-- help -->
            <i *ngIf="showHideHelp" class="pi pi-question-circle" tooltipStyleClass="kb-help-class-id"
              pTooltip="Foto."></i>
            <!-- help -->
          </label>
          <div class="ui-g">

            <!--
            <div class="ui-g-12 ui-fluid">
              <p-fileUpload name="produtoFotosUpload" [url]="getUrlProdutoFotosUpload"
                (onUpload)="onUploadCompleted($event)" (onBeforeSend)="antesUploadAnexo($event)"
                (onError)="onUploadError($event)" accept="image/*" multiple="multiple" chooseLabel="Escolher fotos"
                uploadLabel="Enviar fotos" cancelLabel="Cancelar" maxFileSize="3000000">
                <ng-template pTemplate="content">
                  <ul *ngIf="produtoFotosUpload.length">
                    <li *ngFor="let file of produtoFotosUpload">{{file.name}} - {{file.size}} bytes</li>
                  </ul>
                </ng-template>
              </p-fileUpload>
            </div>
            -->

            <div class="ui-g-12 ui-fluid">
              <p-progressBar *ngIf="produtoFotosUploadProgressShow" [value]="produtoFotosUploadProgressValue"></p-progressBar>
            </div>
            <div class="ui-g-12 ui-fluid">
              <p-fileUpload name="produtoFotosUpload" customUpload="true" (uploadHandler)="handleProdutoFotosUpload($event)"
                accept="image/*" multiple="multiple" chooseLabel="Escolher fotos"
                uploadLabel="Enviar fotos" cancelLabel="Cancelar" maxFileSize="3000000">
                <ng-template pTemplate="content">
                  <ul *ngIf="produtoFotosUpload.length">
                    <li *ngFor="let file of produtoFotosUpload">{{file.name}} - {{file.size}} bytes</li>
                  </ul>
                </ng-template>
              </p-fileUpload>
            </div>

            <div style="border: 1px solid red;" class="ui-g-12 ui-md-6 ui-fluid p-grid">
              <div class="p-col-12 p-md-6 p-col-nogutter drag-column">
                <ul style="margin:0;padding:0">
                  <li *ngFor="let foto of fotos" class="ui-helper-clearfix">
                    <img [src]="foto.miniatura" style="float:left">
                    <div style="margin:8px 0 0 8px;float:left">{{foto.nome}} - {{foto.tamanho}}</div>
                    <button pButton type="button" style="float:right;margin-left: 5px;"
                      (click)="deleteProdutoFotosItem(foto)"
                      icon="pi pi-times" pTooltip="Excluir" tooltipPosition="top"></button>
                  </li>
                </ul>
              </div>
            </div>

            <!--
            <div style="border: 1px solid red;" class="ui-g-12 ui-md-6 ui-fluid p-grid">
              <div class="p-col-12 p-md-6 p-col-nogutter drag-column">
                <ul style="margin:0;padding:0">
                  <li *ngFor="let foto of fotos" class="ui-helper-clearfix" pDraggable="fotos" pDroppable="fotos"
                    (onDragStart)="dragStart($event, foto)" (onDragEnd)="dragEnd($event)" (onDrop)="drop($event)">
                    <img [src]="foto.miniatura" style="float:left" draggable="false">
                    <div style="margin:8px 0 0 8px;float:left">{{foto.nome}} - {{foto.tamanho}}</div>
                    <p-button style="float:right;margin-left: 5px;" (onClick)="deleteProdutoFotosItem(foto)"
                      icon="pi pi-times" pTooltip="Excluir" tooltipPosition="top"></p-button>
                  </li>
                </ul>
              </div>
            </div>
            -->

            <div style="border: 1px solid red;" class="ui-g-12 ui-md-6 ui-fluid">
              <p-galleria [(value)]="fotos" [responsiveOptions]="responsiveOptions"
                [containerStyle]="{'max-width': '400px'}"
                [numVisible]="5" [circular]="true"
                [showItemNavigators]="true">
                <ng-template pTemplate="item" let-item>
                  <img [src]="item.imagem" style="width: 100%; display: block; max-height: 400px;" />
                </ng-template>
                <ng-template pTemplate="thumbnail" let-item>
                  <div class="p-grid p-nogutter p-justify-center">
                    <img [src]="item.miniatura" style="display: block;" />
                  </div>
                </ng-template>
              </p-galleria>
            </div>

          </div>

        </div>

        <!-- Begin buttons -->
        <div class="ui-g-12 crud-buttons-bottom">
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <button pButton type="submit" class="botao-margem-direita" label="Salvar" tooltipPosition="top"
              pTooltip="Salvar registro."></button>
          </div>
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <button pButton (click)="beginFormProduto(formProduto)" type="button" label="Novo" tooltipPosition="top"
              pTooltip="Criar novo registro."></button>
          </div>
          <div class="ui-g-12 ui-md-2 ui-fluid">
            <a routerLink="/produto" pButton label="Voltar" tooltipPosition="top"
              pTooltip="Voltar para a listagem de registros."></a>
          </div>
        </div>
        <!-- End buttons -->


      </div>
    </form>

  </p-panel>

</div>
