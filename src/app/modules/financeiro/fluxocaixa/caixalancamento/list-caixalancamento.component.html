<!--
**********************************************************************************************
Code generated with MKL Plug-in version: 7.0.3
Code generated at time stamp: 2019-07-27T18:56:29.968
Copyright: Kerubin - logokoch@gmail.com

WARNING: DO NOT CHANGE THIS CODE BECAUSE THE CHANGES WILL BE LOST IN THE NEXT CODE GENERATION.
***********************************************************************************************
-->

<div class="container">
	<p-panel>
		<p-header>
			<div class="kb-form-panel-header">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento') }}</div>
		</p-header>
	

  	<div class="ui-g">
		
		<!-- Begin Filters -->
		<p-accordion class="ui-g-12">
			<p-accordionTab header="Filtro">
			
				<div class="ui-g">
					<div class="ui-g-12">
						
						<div class="ui-g-12 ui-md-12 ui-fluid">
							<label class="label-r">Descrição do(s) lançamento(s)</label>
							<p-autoComplete name="caixaLancamentoDescricaoAutoComplete" 
							placeholder="Digite para pesquisar..." [dropdown]="true" 
							[(ngModel)]="caixaLancamentoListFilter.descricao" [multiple]="true"
							[suggestions]="caixaLancamentoDescricaoAutoCompleteSuggestions"
							(completeMethod)="caixaLancamentoDescricaoAutoComplete($event)"
							field="descricao"></p-autoComplete>
						</div>
						
						
						<div class="ui-g-12">
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						        <label style="display: block">Intervalo de tempo</label>
						        <p-dropdown #caixaLancamentoDataLancamentoIsBetweenOptions 
							        [options]="dateFilterIntervalDropdownItems" 
							        [(ngModel)]="caixaLancamentoDataLancamentoIsBetweenOptionsSelected"
							        optionLabel="label" (click)="caixaLancamentoDataLancamentoIsBetweenOptionsOnClick(caixaLancamentoDataLancamentoIsBetweenOptions)">
						        </p-dropdown>
						    </div>
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						      	<label class="label-r">Lançamentos de</label>
						        <p-calendar name="dataLancamentoFrom"
						        dateFormat="dd/mm/yy" [(ngModel)]="caixaLancamentoListFilter.dataLancamentoFrom"></p-calendar>
						    </div>
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						        <label class="label-l label-r">Até</label>
						        <p-calendar name="dataLancamentoTo" dateFormat="dd/mm/yy"
						        [(ngModel)]="caixaLancamentoListFilter.dataLancamentoTo"></p-calendar>
						    </div>
						    
						</div>
						
					</div>
					
					<div>
						<p-button label="Pesquisar" (click)="caixaLancamentoFilterSearch()"></p-button>
					</div>
				</div>
				
			
			</p-accordionTab>
		</p-accordion>
		<!-- End Filters -->
		
		<!-- Begin GRID -->
		<div class="ui-g-12" name="data-grid">
			<p-table selectionMode="single" [loading]="loading" [responsive]="true" [customSort]="true" [paginator]="true" 
				[value]="caixaLancamentoListItems"
			    [rows]="caixaLancamentoListFilter.pageSize" 
			    [totalRecords]="caixaLancamentoListTotalElements"
			    [lazy]="true" (onLazyLoad)="caixaLancamentoListOnLazyLoad($event)" >
			    <ng-template pTemplate="header">
		            <tr>
		            	<th [pSortableColumn]="'caixaDiario'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_caixaDiario_grid') }}<p-sortIcon [field]="'caixaDiario'"></p-sortIcon></th>
		            	<th [pSortableColumn]="'descricao'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_descricao_grid') }}<p-sortIcon [field]="'descricao'"></p-sortIcon></th>
		            	<th style="width: 7em" [pSortableColumn]="'dataLancamento'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_dataLancamento_grid') }}<p-sortIcon [field]="'dataLancamento'"></p-sortIcon></th>
		            	<th [ngClass]="['kb-fin-credito']" style="width: 12em" [pSortableColumn]="'valorCredito'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_valorCredito_grid') }}<p-sortIcon [field]="'valorCredito'"></p-sortIcon></th>
		            	<th [ngClass]="['kb-fin-debito']" style="width: 12em" [pSortableColumn]="'valorDebito'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_valorDebito_grid') }}<p-sortIcon [field]="'valorDebito'"></p-sortIcon></th>
		            	<th [pSortableColumn]="'formaPagamento'">{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_formaPagamento_grid') }}<p-sortIcon [field]="'formaPagamento'"></p-sortIcon></th>
						<th style="width: 12em">Ações</th>
		            </tr>
		        </ng-template>
		        
			    <ng-template pTemplate="body" let-caixaLancamento>
		            <tr [pSelectableRow]="caixaLancamento">
		            	<td>
		            		{{caixaLancamentoCaixaDiarioAutoCompleteFieldConverter(caixaLancamento?.caixaDiario)}}
		            	</td>
		            	<td>
		            		{{caixaLancamento?.descricao}}
		            	</td>
		            	<td>
		            		{{caixaLancamento?.dataLancamento | date:'dd/MM/yyyy'}}
		            	</td>
		            	<td [ngClass]="['kb-fin-credito']" class="kb-field-money">
		            		{{caixaLancamento?.valorCredito | number:'1.2-2' }}
		            	</td>
		            	<td [ngClass]="['kb-fin-debito']" class="kb-field-money">
		            		{{doShowNumberAsNegative(caixaLancamento?.valorDebito) | number:'1.2-2' }}
		            	</td>
		            	<td>
		            		{{ getTranslation('financeiro.fluxo_caixa.caixaLancamento_formaPagamento' + '_' + caixaLancamento?.formaPagamento?.toLowerCase()) }}
		            	</td>
		              	<td class="kb-actions">
		              		<a pButton [routerLink]="['/caixalancamento', caixaLancamento.id]" icon="pi pi-pencil" pTooltip="Editar" tooltipPosition="top"></a>
		              		<!-- <button (click)="mostrarPagarConta(caixaLancamento)" pButton icon="pi pi-money"  pTooltip="Pagar esta conta" tooltipPosition="top"></button> -->
		              		<button [disabled]="caixaLancamentoRuleDisableCUD(caixaLancamento)" (click)="deleteCaixaLancamento(caixaLancamento)" pButton icon="pi pi-trash"  pTooltip="Excluir" tooltipPosition="top"></button>
		              	</td>
		            </tr>
		        </ng-template>
		        
		        
		        <ng-template pTemplate="emptymessage" let-columns>
				    <tr>
				        <td [attr.colspan]="7">
				            Nenhum registro encontrado.
				        </td>
				    </tr>
				</ng-template>
				
				<ng-template pTemplate="footer">
					<tr>
						<td class="kb-sum-footer">Totais</td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer sumField kb-fin-credito">A: {{ caixaLancamentoSumFields.sumValorCredito | number:'1.2-2' }}</td>
						<td class="kb-sum-footer sumField kb-fin-debito">B: {{ doShowNumberAsNegative(caixaLancamentoSumFields.sumValorDebito) | number:'1.2-2' }}</td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer">(<span class="kb-fin-credito">A</span>-<span class="kb-fin-debito">B</span>): {{ (caixaLancamentoSumFields.sumValorCredito - caixaLancamentoSumFields.sumValorDebito) | currency:'BRL':'symbol':'1.2-2':'pt' }}</td>
					</tr>
				</ng-template>
			</p-table>
		</div>
		<!-- End GRID -->
		
		<div class="ui-g-12 ui-md-2 ui-fluid">
			<a routerLink="/caixalancamento/novo" pButton label="Novo registro"></a>
		</div>
		
		<!-- Begin Extras
		
		<p-dialog header="Pagar conta" [(visible)]="mostrarDialogPagarConta" [modal]="true" [responsive]="true" [width]="350" [minWidth]="200" [minY]="70"
		        [maximizable]="false" [baseZIndex]="10000">
		      <div>
		          <div>Conta: <strong>{{ contaPagar.descricao }}</strong></div>
		          <div>
		              <label style="display: block">Valor pago</label>
		              <input currencyMask [options]="{ prefix: '', thousands: '.', decimal: ',', allowNegative: false }"
		              [(ngModel)]="contaPagar.valorPago" pInputText type="text" name="contaPagarValorPago" ngModel placeholder="0,00">
		          </div>
		          <div>
		              <label style="display: block">Data pagamento</label>
		              <p-calendar name="contaPagarDataPagamento" dateFormat="dd/mm/yy"
		              [inline]="false" [readonlyInput]="false" [showIcon]="false"
		               [(ngModel)]="contaPagar.dataPagamento" ngModel></p-calendar>
		          </div>
		      </div>
		        <p-footer>
		            <button type="button" pButton icon="pi pi-check" (click)="executarPagarConta()" label="Pagar"></button>
		            <button type="button" pButton icon="pi pi-close" (click)="cancelarPagarConta()" label="Cancelar" class="ui-button-secondary"></button>
		        </p-footer>
		</p-dialog>
		
		End Extras -->
	</div>
	
	</p-panel>
  
</div>
