<!--
**********************************************************************************************
Code generated by MKL Plug-in
Copyright: Kerubin - kerubin.platform@gmail.com

WARNING: DO NOT CHANGE THIS CODE BECAUSE THE CHANGES WILL BE LOST IN THE NEXT CODE GENERATION.
***********************************************************************************************
-->

<div class="container">
	<p-panel>
		<p-header>
			<div class="kb-form-panel-header">{{ getTranslation('security.authorization.creditOrder') }}</div>
		</p-header>
	

  	<div class="ui-g">
		
		<!-- Begin Filters -->
		<p-accordion class="ui-g-12">
			<p-accordionTab header="Filtros">
			
				<div class="ui-g">
					<div class="ui-g-12">
						
						<div class="ui-g-12 ui-md-12 hidden ui-fluid">
							<label class="label-r">Protocolo de identificação</label>
							<input pInputText type="text"
							[(ngModel)]="creditOrderListFilter.id"/>
						</div>
						
						<div class="ui-g-12 ui-md-12 ui-fluid">
							<label class="label-r">Usuário solicitante</label>
							<p-autoComplete name="creditOrderOrderUserNameAutoComplete" 
							placeholder="Digite para pesquisar..." [dropdown]="true" 
							[(ngModel)]="creditOrderListFilter.orderUserName" [multiple]="true"
							[suggestions]="creditOrderOrderUserNameAutoCompleteSuggestions"
							(completeMethod)="creditOrderOrderUserNameAutoComplete($event)"
							field="orderUserName"></p-autoComplete>
						</div>
						
						
						<div class="ui-g-12 ui-md-12 ui-fluid">
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						        <label style="display: block">Data dos pedidos</label>
						        <p-dropdown #creditOrderOrderDateIsBetweenOptions 
							        [options]="dateFilterIntervalDropdownItems" 
							        [(ngModel)]="creditOrderOrderDateIsBetweenOptionsSelected"
							        optionLabel="label" (click)="creditOrderOrderDateIsBetweenOptionsOnClick(creditOrderOrderDateIsBetweenOptions)">
						        </p-dropdown>
						    </div>
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						      	<label class="label-r">Pedidos de</label>
						        <p-calendar name="orderDateFrom"
						        dateFormat="dd/mm/yy" [(ngModel)]="creditOrderListFilter.orderDateFrom"></p-calendar>
						    </div>
						
						    <div class="ui-g-12 ui-md-2 ui-fluid">
						        <label class="label-l label-r">até</label>
						        <p-calendar name="orderDateTo" dateFormat="dd/mm/yy"
						        [(ngModel)]="creditOrderListFilter.orderDateTo"></p-calendar>
						    </div>
						    
						</div>
						
						
						
						<div class="ui-g-12 ui-md-12 ui-fluid">
						
						    <div class="ui-g-12 ui-md-3 ui-fluid">
						      	<label class="label-r">Pedidos com valores de</label>
						        <input pInputText type="text" name="orderValueFrom"
						        currencyMask [options]="{prefix: '', thousands: '.', decimal: ',', allowNegative: false}" placeholder="0,00"
						        [(ngModel)]="creditOrderListFilter.orderValueFrom" />
						    </div>
						
						    <div class="ui-g-12 ui-md-3 ui-fluid">
						        <label class="label-l label-r">até</label>
						        <input pInputText type="text" name="orderValueTo"
						        currencyMask [options]="{prefix: '', thousands: '.', decimal: ',', allowNegative: false}" placeholder="0,00"
						        [(ngModel)]="creditOrderListFilter.orderValueTo" />
						    </div>
						    
						</div>
						
						
						<div class="ui-g-12 ui-md-12 ui-fluid">
							<label class="label-r">Situação do pedido</label>
							<p-dropdown [options]="creditOrderOrderStatusOptions" placeholder="Selecione um item..."
							[(ngModel)]="creditOrderListFilter.orderStatus"></p-dropdown>
						</div>
					</div>
					
					<div>
						<p-button label="Aplicar os filtros e pesquisar" icon="pi pi-search" iconPos="left" (click)="creditOrderFilterSearch()"></p-button>
					</div>
				</div>
				
			
			</p-accordionTab>
		</p-accordion>
		<!-- End Filters -->
		
		<!-- Begin GRID -->
		<div class="ui-g-12" name="data-grid">
			<p-table selectionMode="single" [loading]="tableLoading" 
				[responsive]="true" sortMode="multiple" [paginator]="true" [resizableColumns]="true"
				[value]="creditOrderListItems"
			    [rows]="creditOrderListFilter.pageSize" 
			    [totalRecords]="creditOrderListTotalElements"
			    [lazy]="true" (onLazyLoad)="creditOrderListOnLazyLoad($event)" >
			    
			    <ng-template pTemplate="caption">
			    	Legenda:
			    	<span class="kb-conta-paga kb-conta-legenda">Pedido pago</span>
			    	<span class="kb-conta-vence-hoje kb-conta-legenda">Pedido cancelado</span>
			    </ng-template>
			    
			    <ng-template pTemplate="header">
		            <tr>
		            	<th style="width: 90px" [pSortableColumn]="'id'">{{ getTranslation('security.authorization.creditOrder_id_grid') }}<p-sortIcon [field]="'id'"></p-sortIcon></th>
		            	<th style="width: 150px" [pSortableColumn]="'orderUserName'">{{ getTranslation('security.authorization.creditOrder_orderUserName_grid') }}<p-sortIcon [field]="'orderUserName'"></p-sortIcon></th>
		            	<th style="width: 7em" [pSortableColumn]="'orderDate'">{{ getTranslation('security.authorization.creditOrder_orderDate_grid') }}<p-sortIcon [field]="'orderDate'"></p-sortIcon></th>
		            	<th style="width: 8em" [pSortableColumn]="'orderValue'">{{ getTranslation('security.authorization.creditOrder_orderValue_grid') }}<p-sortIcon [field]="'orderValue'"></p-sortIcon></th>
		            	<th style="width: 8em" [pSortableColumn]="'orderBonusValue'">{{ getTranslation('security.authorization.creditOrder_orderBonusValue_grid') }}<p-sortIcon [field]="'orderBonusValue'"></p-sortIcon></th>
		            	<th style="width: 8em" [pSortableColumn]="'orderTotalCredits'">{{ getTranslation('security.authorization.creditOrder_orderTotalCredits_grid') }}<p-sortIcon [field]="'orderTotalCredits'"></p-sortIcon></th>
		            	<th [pSortableColumn]="'paymentMethod'">{{ getTranslation('security.authorization.creditOrder_paymentMethod_grid') }}<p-sortIcon [field]="'paymentMethod'"></p-sortIcon></th>
		            	<th style="width: 100px" [pSortableColumn]="'paymentMethodDescription'">{{ getTranslation('security.authorization.creditOrder_paymentMethodDescription_grid') }}<p-sortIcon [field]="'paymentMethodDescription'"></p-sortIcon></th>
		            	<th style="width: 90px" [pSortableColumn]="'orderStatus'">{{ getTranslation('security.authorization.creditOrder_orderStatus_grid') }}<p-sortIcon [field]="'orderStatus'"></p-sortIcon></th>
		            	<th style="width: 7em" [pSortableColumn]="'orderPaidDate'">{{ getTranslation('security.authorization.creditOrder_orderPaidDate_grid') }}<p-sortIcon [field]="'orderPaidDate'"></p-sortIcon></th>
		            	<th style="width: 95px" [pSortableColumn]="'orderCanceledDate'">{{ getTranslation('security.authorization.creditOrder_orderCanceledDate_grid') }}<p-sortIcon [field]="'orderCanceledDate'"></p-sortIcon></th>
		            	<th [pSortableColumn]="'orderHistory'">{{ getTranslation('security.authorization.creditOrder_orderHistory_grid') }}<p-sortIcon [field]="'orderHistory'"></p-sortIcon></th>
		            </tr>
		        </ng-template>
		        
			    <ng-template pTemplate="body" let-creditOrder>
		            <tr [pSelectableRow]="creditOrder">
		            	<td style="text-align: center" [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_id_grid') }}:</span>
		            		<i *ngIf="creditOrder?.id" class="pi pi-info-circle" style="font-size: 2em" [pTooltip]=creditOrder?.id></i>
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderUserName_grid') }}:</span>
		            		{{ creditOrder?.orderUserName }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderDate_grid') }}:</span>
		            		{{creditOrder?.orderDate | date:'dd/MM/yyyy' }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)" class="kb-field-money">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderValue_grid') }}:</span>
		            		{{creditOrder?.orderValue | currency:'BRL':'symbol':'1.2-2':'pt' }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)" class="kb-field-money">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderBonusValue_grid') }}:</span>
		            		{{creditOrder?.orderBonusValue | currency:'BRL':'symbol':'1.2-2':'pt' }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)" class="kb-field-money">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderTotalCredits_grid') }}:</span>
		            		{{creditOrder?.orderTotalCredits | currency:'BRL':'symbol':'1.2-2':'pt' }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_paymentMethod_grid') }}:</span>
		            		{{ getTranslation('security.authorization.creditOrder_paymentMethod' + '_' + creditOrder?.paymentMethod?.toLowerCase()) }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_paymentMethodDescription_grid') }}:</span>
		            		{{ creditOrder?.paymentMethodDescription }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderStatus_grid') }}:</span>
		            		{{ getTranslation('security.authorization.creditOrder_orderStatus' + '_' + creditOrder?.orderStatus?.toLowerCase()) }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderPaidDate_grid') }}:</span>
		            		{{creditOrder?.orderPaidDate | date:'dd/MM/yyyy' }}
		            	</td>
		            	<td [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderCanceledDate_grid') }}:</span>
		            		{{creditOrder?.orderCanceledDate | date:'dd/MM/yyyy' }}
		            	</td>
		            	<td style="text-align: center" [ngClass]="applyAndGetRuleGridRowStyleClass(creditOrder)">
		            		<span class="ui-column-title">{{ getTranslation('security.authorization.creditOrder_orderHistory_grid') }}:</span>
		            		<i *ngIf="creditOrder?.orderHistory" class="pi pi-clock" style="font-size: 2em" [pTooltip]=creditOrder?.orderHistory></i>
		            	</td>
		            </tr>
		        </ng-template>
		        
		        
		        <ng-template pTemplate="emptymessage" let-columns>
				    <tr>
				        <td [attr.colspan]="12">
				            Nenhum registro encontrado.
				        </td>
				    </tr>
				</ng-template>
				
				<ng-template pTemplate="footer">
					<tr>
						<td class="kb-sum-footer">Totais </td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer sumField">{{ creditOrderSumFields.sumOrderValue | currency:'BRL':'symbol':'1.2-2':'pt' }}</td>
						<td class="kb-sum-footer sumField">{{ creditOrderSumFields.sumOrderBonusValue | currency:'BRL':'symbol':'1.2-2':'pt' }}</td>
						<td class="kb-sum-footer sumField">{{ creditOrderSumFields.sumOrderTotalCredits | currency:'BRL':'symbol':'1.2-2':'pt' }}</td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
						<td class="kb-sum-footer"></td>
					</tr>
				</ng-template>
				
				<ng-template pTemplate="summary">
					<div class="kb-mobile-block"><span class="">Soma "Valor do pedido" {{ creditOrderSumFields.sumOrderValue | currency:'BRL':'symbol':'1.2-2':'pt' }}</span></div>
					<div class="kb-mobile-block"><span class="">Soma "Valor bônus" {{ creditOrderSumFields.sumOrderBonusValue | currency:'BRL':'symbol':'1.2-2':'pt' }}</span></div>
					<div class="kb-mobile-block"><span class="">Soma "Total créditos" {{ creditOrderSumFields.sumOrderTotalCredits | currency:'BRL':'symbol':'1.2-2':'pt' }}</span></div>
					<div>Sumarização </div>
				</ng-template>
			</p-table>
		</div>
		<!-- End GRID -->
	</div>
	
	</p-panel>
  
</div>
